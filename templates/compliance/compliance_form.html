{% extends "base.html" %}

{% block title %}
  {% if is_edit %}Edit Compliance{% else %}Add Compliance{% endif %}
{% endblock %}

{% block content %}
<div class="p-6 max-w-xl">

  <!-- Header -->
  <div class="flex items-center gap-3 mb-6">
    <a href="{% url 'compliance:compliance_list' %}"
       class="px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm font-semibold">
      ‚Üê Back
    </a>
    <h2 class="text-2xl font-bold">
      {% if is_edit %}Edit Compliance{% else %}Add Compliance{% endif %}
    </h2>
  </div>

  <!-- Messages -->
  {% if messages %}
  <div class="space-y-2 mb-4">
    {% for message in messages %}
    <div class="px-4 py-2 rounded text-sm font-semibold
      {% if message.tags == 'success' %}
        bg-green-100 text-green-700
      {% elif message.tags == 'error' %}
        bg-red-100 text-red-700
      {% else %}
        bg-blue-100 text-blue-700
      {% endif %}">
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Form -->
<form method="post" class="bg-white shadow rounded p-6 space-y-4">
  {% csrf_token %}

  {% for field in form %}
    <div>
      <label class="block font-medium mb-1">{{ field.label|safe }}</label>
      {{ field }}
      {% for error in field.errors %}
        <p class="text-red-600 text-xs mt-1">{{ error }}</p>
      {% endfor %}
    </div>
  {% endfor %}

  <div class="flex gap-3 pt-4">
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
      {% if is_edit %}Update{% else %}Save{% endif %}
    </button>
    <a href="{% url 'compliance:compliance_list' %}" class="px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700">
      Cancel
    </a>
  </div>
</form>

</div>
{% endblock %}
