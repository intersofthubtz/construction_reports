{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}
  {% if contractor %}Edit{% else %}Add{% endif %} Contractor
{% endblock %}

{% block content %}
<div class="p-6 max-w-4xl">

  <!-- Header -->
  <div class="flex items-center gap-3 mb-6">
    <a href="{% url 'setup:contractor_list' %}" 
       class="px-3 py-2 rounded shadow bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-semibold">
      ‚Üê Back to Contractors
    </a>
    <h2 class="text-2xl font-semibold">
      {% if contractor %}Edit{% else %}Add{% endif %} Contractor
    </h2>
  </div>

  <form method="post" class="bg-white shadow rounded p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
    {% csrf_token %}

    <!-- Row 1: Tin Number & Contractor Type -->
    <div>
      <label class="block font-medium mb-1">{{ form.tin_number.label|safe }}</label>
      {{ form.tin_number|add_class:"border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" }}
      {% for error in form.tin_number.errors %}
        <p class="text-red-600 text-xs mt-1">{{ error }}</p>
      {% endfor %}
    </div>

    <div>
      <label class="block font-medium mb-1">{{ form.contractor_type.label|safe }}</label>
      {{ form.contractor_type|add_class:"border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" }}
      {% for error in form.contractor_type.errors %}
        <p class="text-red-600 text-xs mt-1">{{ error }}</p>
      {% endfor %}
    </div>

    <!-- Row 2: Name -->
    <div class="col-span-1 md:col-span-2">
      <label class="block font-medium mb-1">{{ form.name.label|safe }}</label>
      {{ form.name|add_class:"border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" }}
      {% for error in form.name.errors %}
        <p class="text-red-600 text-xs mt-1">{{ error }}</p>
      {% endfor %}
    </div>

    <!-- Row 2: Address -->
    <div class="col-span-1 md:col-span-2">
      <label class="block font-medium mb-1">{{ form.address.label|safe }}</label>
      {{ form.address|add_class:"border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" }}
      {% for error in form.address.errors %}
        <p class="text-red-600 text-xs mt-1">{{ error }}</p>
      {% endfor %}
    </div>

    <!-- Row 3: City -->
    <div class="col-span-1 md:col-span-2">
      <label class="block font-medium mb-1">{{ form.city.label|safe }}</label>
      {{ form.city|add_class:"border rounded px-3 py-2 w-full focus:ring-2 focus:ring-blue-500" }}
      {% for error in form.city.errors %}
        <p class="text-red-600 text-xs mt-1">{{ error }}</p>
      {% endfor %}
    </div>

    <!-- Buttons -->
    <div class="col-span-1 md:col-span-2 flex gap-3 mt-4">
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
        Save
      </button>
      <a href="{% url 'setup:contractor_list' %}" 
         class="px-4 py-2 border rounded bg-red-600 text-white hover:bg-red-700">
        Cancel
      </a>
    </div>
  </form>
</div>
{% endblock %}
