{% extends "base.html" %}
{% block title %}Transaction Details{% endblock %}

{% block content %}
<div class="p-6 max-w-7xl mx-auto space-y-6">

  <!-- Header -->
  <div class="flex items-center gap-3 mb-6">
    <a href="{% url 'finance:transaction_list' %}" 
       class="px-3 py-2 rounded shadow bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-semibold">
      ← Back to Transactions
    </a>
    <h2 class="text-2xl font-semibold">Transaction Details</h2>
  </div>

  <!-- Details Card -->
  <div class="bg-white shadow rounded p-6 space-y-4">

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <h3 class="text-sm font-semibold text-gray-500">Date</h3>
        <p class="mt-1 text-gray-800">{{ transaction.date|date:"d M Y" }}</p>
      </div>

      <div>
        <h3 class="text-sm font-semibold text-gray-500">Payee</h3>
        <p class="mt-1 text-gray-800">{{ transaction.payee }}</p>
      </div>

      <div>
        <h3 class="text-sm font-semibold text-gray-500">Type</h3>
        <p class="mt-1">
          <span class="px-2 py-1 rounded text-xs font-semibold
            {% if transaction.type == 'Credit' %}bg-green-100 text-green-700
            {% else %}bg-red-100 text-red-700{% endif %}">
            {{ transaction.type }}
          </span>
        </p>
      </div>

      <div>
        <h3 class="text-sm font-semibold text-gray-500">Amount Paid</h3>
        <p class="mt-1 text-gray-800">{{ transaction.amount_paid|floatformat:2 }}</p>
      </div>

      <div>
        <h3 class="text-sm font-semibold text-gray-500">Balance After</h3>
        <p class="mt-1 text-blue-700 font-semibold">{{ transaction.balance_after|floatformat:2 }}</p>
      </div>

      <div>
        <h3 class="text-sm font-semibold text-gray-500">Reference / Receipt No</h3>
        <p class="mt-1 text-gray-800">{{ transaction.pv_or_receipt_no }}</p>
      </div>

      <div class="sm:col-span-2">
        <h3 class="text-sm font-semibold text-gray-500">Remarks</h3>
        <p class="mt-1 text-gray-800">{{ transaction.remarks|default:"—" }}</p>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-wrap gap-3 mt-4">
      {% if perms.finance.change_fundtransaction %}
      <a href="{% url 'finance:transaction_edit' transaction.pk %}"
         class="px-4 py-2 rounded bg-yellow-500 text-white hover:bg-yellow-600">
        Edit
      </a>
      {% endif %}

      {% if perms.finance.delete_fundtransaction %}
      <a href="{% url 'finance:transaction_delete' transaction.pk %}"
         class="px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600">
        Delete
      </a>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}
